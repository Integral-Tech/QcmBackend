syntax = "proto3";

package qcm.msg;

import "model.proto";

enum MessageType {
  UNKNOWN = 0;
  TEST_REQUEST = 1;
  TEST_RESPONSE = 2;
  GET_ALL_ALBUMS_REQUEST = 3;
  GET_ALL_ALBUMS_RESPONSE = 4;
  GET_SONGS_BY_ALBUM_REQUEST = 5;
  GET_SONGS_BY_ALBUM_RESPONSE = 6;
}

message GetAllAlbumsRequest {
  int32 library_id = 1;
  int32 page = 2;
  int32 page_size = 3;
}

message GetAllAlbumsResponse {
  repeated qcm.msg.model.Album albums = 1;
  int32 total = 2;
}

message GetSongsByAlbumRequest {
  string album_id = 1;
  int32 library_id = 2;
}

message GetSongsByAlbumResponse {
  repeated qcm.msg.model.Song songs = 1;
  qcm.msg.model.Album album = 2;
}

message TestRequest {
  string test_data = 1;
}

message TestResponse {
  string test_data = 1;
  bool success = 2;
}

message QcmMessage {
  MessageType type = 1;
  string request_id = 2;
  
  oneof payload {
    TestRequest test_request = 101;
    TestResponse test_response = 102;
    GetAllAlbumsRequest get_all_albums_request = 103;
    GetAllAlbumsResponse get_all_albums_response = 104;
    GetSongsByAlbumRequest get_songs_by_album_request = 105;
    GetSongsByAlbumResponse get_songs_by_album_response = 106;
  }
}
